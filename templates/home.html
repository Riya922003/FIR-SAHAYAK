<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FIR SAHAYAK</title>
    <link rel="shortcut icon" href="https://assets-global.website-files.com/64a2ab71942e1d57feb6fe39/6528221f95333ff155d01ad2_fav.gif" type="image/x-icon">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.2.0/fonts/remixicon.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/locomotive-scroll@3.5.4/dist/locomotive-scroll.css">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/home.css') }}">
</head>

<body>
    {% block content%}
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div id="flash-message" class="alert alert-{{ category }} flash-message" role="alert">
                        {{ message }}
                    </div>
                {% endfor %}
            {% endif %}
    {% endwith %}
    <nav>
        <div class="logo-container">
            <!-- Your logo goes here -->
            <img src="https://i.ibb.co/4shBM7Y/pngwing-com.png" alt="Logo">
        </div>

            <!-- Rest of your navbar content -->
        <h1>FIR SAHAYAK</h1>
        <p></p>
        <div class="nav-part2">
            <div class="nav-elem">
                <h4>USER PROFILE</h4>
                <h5><a href="/login">Account</a></h5>
            </div>
            <div class="nav-elem">
                <h4>MISSING</h4>
                <h5><span>MISSING PERSON SEARCH</span></h5>
                <h5><span>MISSING PERSON/CHILDREN</span></h5>
                <h5><span>REPORT FOUND(GNCTD)</span></h5>
            </div>
            <div class="nav-elem">
                <h4>THEFT</h4>
                <h5><span>LOST MONEY</span></h5>
                <h5><span>LOST ELECTRONIC ITEM</span></h5>
                <h5><span>ROBBERY</span></h5>
            </div>
            <div class="nav-elem">
                <h4>SEXUAL ASSAULT</h4>
                <h5><span>RAPE</span></h5>
                <h5><span>MOLESTATION</span></h5>
                <h5><span>DOMESTIC VIOLENCE</span></h5>
            </div>
            <div class="nav-elem">
                <h4>HIT AND RUN</h4>
                <h5><span>VEHICLE </span></h5>
                <h5><span>PEDESTRIAN</span></h5>
                <h5><span>PROPERTY DAMAGE</span></h5>
            </div>

            <div class="nav-elem">
                <h4>VIEW FIR STATUS</h4>
                <h5>View FIR</h5>
            </div>
        </div>
    <button id="loginBtn">LOGIN/SIGN-UP<svg fill="none" viewBox="0 0 20 20">
                <path fill="#fff"
                    d="M2.5 14.375V17.5h3.125l9.217-9.217-3.125-3.125L2.5 14.375Zm14.758-8.508a.83.83 0 0 0 0-1.175l-1.95-1.95a.83.83 0 0 0-1.175 0l-1.525 1.525 3.125 3.125 1.525-1.525Z">
                </path>
            </svg></button>
        <div id="nav-bottom">

        </div>
    </nav>
    <div id="main">
        <div id="page1">
            <div class="slide-container">

                <div class="slides">
                    <img src="{{ url_for('static', filename='Untitled design-4.png') }}" class="active" data-loaded="true" loading="lazy" onerror="this.onerror=null;this.src='data:image/svg+xml;utf8,<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%22600%22 height=%22350%22><rect width=%22600%22 height=%22350%22 fill=%22%23dddddd%22/><text x=%2230%22 y=%22200%22 font-size=%2232%22 fill=%22%23666%22>Image+not+available</text></svg>';this.setAttribute('data-loaded','true');">
                    <img src="{{ url_for('static', filename='Untitled design-5.png') }}" loading="lazy" onerror="this.onerror=null;this.src='data:image/svg+xml;utf8,<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%22600%22 height=%22350%22><rect width=%22600%22 height=%22350%22 fill=%22%23dddddd%22/><text x=%2230%22 y=%22200%22 font-size=%2232%22 fill=%22%23666%22>Image+not+available</text></svg>';this.setAttribute('data-loaded','true');">
                    <img src="{{ url_for('static', filename='image.png') }}" loading="lazy" onerror="this.onerror=null;this.src='data:image/svg+xml;utf8,<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%22600%22 height=%22350%22><rect width=%22600%22 height=%22350%22 fill=%22%23dddddd%22/><text x=%2230%22 y=%22200%22 font-size=%2232%22 fill=%22%23666%22>Image+not+available</text></svg>';this.setAttribute('data-loaded','true');">
                    <img src="https://digitalpolice.gov.in/Content/images/banner.jpg" loading="lazy" onerror="this.onerror=null;this.style.display='none';this.setAttribute('data-loaded','true');">
                    <img src="https://images.unsplash.com/photo-1529101091764-c3526daf38fe?auto=format&fit=crop&w=1600&q=80" loading="lazy" onerror="this.onerror=null;this.setAttribute('data-loaded','true');this.src='data:image/svg+xml;utf8,<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%22600%22 height=%22350%22><rect width=%22600%22 height=%22350%22 fill=%22%23dddddd%22/><text x=%2230%22 y=%22200%22 font-size=%2232%22 fill=%22%23666%22>Image+not+available</text></svg>';">
                </div>
                

                <div class="buttons">
                    <span class="next">&#10095;</span>
                    <span class="prev">&#10094;</span>
                </div>

                <div class="dotsContainer">
                    <!-- dots will be generated dynamically by JS -->
                </div>

            </div>
              <!--image slider end-->
            <div id="moving-div">
                <div id="blur-left"></div>
                <div class="move">
                    <img src="https://cdn.dnaindia.com/sites/default/files/styles/full/public/2015/12/27/408883-delhi-police-logo.jpg" alt="" loading="lazy" onerror="this.onerror=null;this.style.display='none';">
                    <img src="https://tse4.mm.bing.net/th?id=OIP.7K7QEzRfQpeDVLWtKiij3gHaNK&pid=Api&P=0&h=180" alt="" loading="lazy" onerror="this.onerror=null;this.style.display='none';">
                    <img src="https://aniportalimages.s3.amazonaws.com/media/details/SKFDJKLASJFKLJASD2021081908114120210916090821.jpg" alt="" loading="lazy" onerror="this.onerror=null;this.style.display='none';">
                    <img src="https://tse3.mm.bing.net/th?id=OIP.-Zku30boNYU7Yr8Jx6w8xwHaDn&pid=Api&P=0&h=180" alt="" loading="lazy" onerror="this.onerror=null;this.style.display='none';">
                    <img src="https://imgk.timesnownews.com/story/Chennai-Police.jpg" alt="" loading="lazy" onerror="this.onerror=null;this.style.display='none';">
                    <img src="https://tse2.mm.bing.net/th?id=OIP.My0L79vf3wzPD4e1hI93LAHaEK&pid=Api&P=0&h=180" alt="" loading="lazy" onerror="this.onerror=null;this.style.display='none';">
                    <img src="https://tse2.mm.bing.net/th?id=OIP.F3M37dvPL1IBD-4lrbGd6wHaHa&pid=Api&P=0&h=180" alt="" loading="lazy" onerror="this.onerror=null;this.style.display='none';">
                    <img src="https://tse4.mm.bing.net/th?id=OIP.glM8EsNibecQHbipBN2ygwHaEq&pid=Api&P=0&h=180" alt="" loading="lazy" onerror="this.onerror=null;this.style.display='none';">
                </div>
                <div class="move">
                    <img src="https://cdn.dnaindia.com/sites/default/files/styles/full/public/2015/12/27/408883-delhi-police-logo.jpg" alt="">
                    <img src="https://tse4.mm.bing.net/th?id=OIP.7K7QEzRfQpeDVLWtKiij3gHaNK&pid=Api&P=0&h=180" alt="">
                    <img src="https://aniportalimages.s3.amazonaws.com/media/details/SKFDJKLASJFKLJASD2021081908114120210916090821.jpg" alt="">
                    <img src="https://tse3.mm.bing.net/th?id=OIP.-Zku30boNYU7Yr8Jx6w8xwHaDn&pid=Api&P=0&h=180" alt="">
                    <img src="https://imgk.timesnownews.com/story/Chennai-Police.jpg" alt="">
                    <img src="https://tse2.mm.bing.net/th?id=OIP.My0L79vf3wzPD4e1hI93LAHaEK&pid=Api&P=0&h=180" alt="">
                    <img src="https://tse2.mm.bing.net/th?id=OIP.F3M37dvPL1IBD-4lrbGd6wHaHa&pid=Api&P=0&h=180" alt="">
                    <img src="https://tse4.mm.bing.net/th?id=OIP.glM8EsNibecQHbipBN2ygwHaEq&pid=Api&P=0&h=180" alt="">
                </div>
                <div id="blur-right"></div>

            </div>
        </div>
    <div id="page3">
        <video src="{{ url_for('static', filename='fir-sahayak.mp4') }}"></video>
        <div class="page3-center">
            <div class="icon">
                <i class="ri-play-fill"></i>
            </div>
            <h5>Watch BOT DEMO</h5>
        </div>
    </div>
    <div id="page5">
        <div class="button">
            <a href="/fir_form">REGISTER FIR</a>
          </div>
        <div id="page5-right">
            <p>FIR Assistant is a secure online platform that simplifies the process of filing First Information Reports (FIRs). It features an intuitive web interface, accessible from any device, that guides users through the registration with an intelligent bot to ensure accuracy. The platform includes secure user authentication, seamless session management, and IP address tracking for enhanced accountability. After submission, users can download their FIR reports as PDFs and even request corrections to previously registered records.</p>
            <div id="page5-content">
                <div class="uiux">
                    <details open>
                        <summary>
                            <h1>FAQ's</h1>
                        </summary>
                        <div id="page-container">
                            <div id="page-container">
                                <div class="page5-elem">
                                    <div class="over"></div>
                                    <h3>Safety</h3>
                                    <p>Ensuring the safety and security of our users is our top priority. We implement stringent measures to safeguard your personal information and ensure confidentiality throughout the FIR registration process. Our platform employs advanced encryption techniques to protect your data from unauthorized access or misuse. Additionally, we regularly update our security protocols to stay ahead of emerging threats and vulnerabilities. Rest assured that your privacy and security are our utmost concern, and we are committed to maintaining the highest standards of protection for all users.</p>
                                    <i class="ri-arrow-right-up-line"></i>
                                </div>
                                <div class="page5-elem">
                                    <div class="over"></div>
                                    <h3>legal</h3>
                                    <p>We adhere to all legal regulations and standards to provide a reliable and trustworthy FIR registration platform. Our team is committed to upholding the law and facilitating lawful processes. We work closely with legal experts to ensure that our platform complies with all applicable laws and regulations governing FIR registration. By adhering to these standards, we strive to build trust and confidence among our users, knowing that they can rely on us to provide a secure and compliant platform for filing FIRs.</p>
                                    <i class="ri-arrow-right-up-line"></i>
                                </div>
                                <div class="page5-elem">
                                    <div class="over"></div>
                                    <h3>how to trust</h3>
                                    <p>At FIR Sahayak, we understand the paramount importance of trust in our platform. We are dedicated to earning and maintaining the trust of our users by delivering transparent and reliable services. Our commitment is fortified by implementing robust security measures and upholding ethical practices at every step. We prioritize transparency in our operations, ensuring that users have full visibility into our processes and procedures. By fostering a culture of trustworthiness and accountability, we aim to create a platform where users feel confident and secure in their interactions with us.</p>
                                    <i class="ri-arrow-right-up-line"></i>
                                </div>
                                <div class="page5-elem">
                                    <div class="over"></div>
                                    <h3>Terms and Conditions</h3>
                                    <p>Our terms and conditions delineate the rules and guidelines governing the utilization of our platform. By engaging with FIR Sahayak, you implicitly consent to adhere to these terms and conditions. These guidelines serve to ensure a fair and equitable experience for all users, fostering a harmonious environment where everyone can benefit from our services. We encourage users to familiarize themselves with our terms and conditions to facilitate a smooth and mutually beneficial interaction with our platform.</p>
                                    <i class="ri-arrow-right-up-line"></i>
                                </div>
                            </div>
                    </details>
            </div>
    </div>
    </div>
    </div>
    <div class="page-end">
        <footer>
            <div class="container">
                <div class="footer-content">
                    <ul class="list first">
                    <li><a href="">Privacy Policy</a></li>
                        <li><a href="">Copywrite Policy</a></li>
                        <li><a href="">Hyperlink Policy</a></li>
                        <li><a href="">Accessiblity Statement</a></li>
                        <li><a href="">Terms and Conditions</a></li>
                    </ul>
                </div>
                <div class="footer-content">
                    <h3>Quick Links</h3>
                        <ul class="list">
                        <li><a href="">Home</a></li>
                        <li><a href="">About</a></li>
                        <li><a href="">Services</a></li>
                        <li><a href="">Products</a></li>
                        <li><a href="">Contact</a></li>
                        </ul>
                </div>
                <div class="footer-content">
                    <h3>Follow Us</h3>
                    <ul class="social-icons">
                        <li><a href=""><i class="fab fa-facebook"></i></a></li>
                        <li><a href=""><i class="fab fa-twitter"></i></a></li>
                        <li><a href=""><i class="fab fa-instagram"></i></a></li>
                        <li><a href=""><i class="fab fa-linkedin"></i></a></li>
                    </ul>
                    </div>
            </div>
            <div class="bottom-bar">
                <p>© Content Owned by Group 101, VIT Bhopal University students. @FIR-SAHAYAK - Register online FIR with ease ©2024 All rights reserved</p>
            </div>
        </footer>
    </div>
    </div>
{% endblock %}
    <!-- Login modal markup -->
    <div id="loginModal" class="modal" style="display:none;">
        <div class="modal-content">
            <span class="close" id="loginClose">&times;</span>
            <h2>Login</h2>
            <form id="loginForm" action="/ajax_login" method="post" class="modal-form">
                <label for="email">Email</label>
                <input type="email" id="email" name="email" required>
                <label for="password">Password</label>
                <input type="password" id="password" name="password" required>
                <!-- reCAPTCHA v3: hidden input receives token before submit -->
                <input type="hidden" name="g-recaptcha-response" class="g-recaptcha-response">
                <button type="submit" class="modal-submit">Login</button>
            </form>
            <div id="loginError" class="login-error" style="display:none; margin-top:10px;color:#b00020;"></div>
            <p style="margin-top:8px;"><a href="{{ url_for('forgot_password') }}">Forgot your password?</a></p>
            <p class="modal-footer">New to the website? <a href="/sign_up" id="openRegisterLink">Register now</a></p>
        </div>
    </div>

    <!-- Register modal markup -->
    <div id="registerModal" class="modal" style="display:none;">
        <div class="modal-content">
            <span class="close" id="registerClose">&times;</span>
            <h2>Register</h2>
            <form id="registerForm" action="/sign_up" method="post" class="modal-form">
                <label for="Full_name">Full Name</label>
                <input type="text" id="Full_name" name="Full_name" required>

                <label for="username">Username</label>
                <input type="text" id="username" name="username" required>

                <label for="email_reg">Email</label>
                <input type="email" id="email_reg" name="email" required>

                <label for="Number">Number</label>
                <input type="text" id="Number" name="Number" required>

                <label for="Phone_number">Phone number</label>
                <input type="text" id="Phone_number" name="Phone_number" required>

                <label for="Adhar_card_number">Adhar-Card Number</label>
                <input type="text" id="Adhar_card_number" name="Adhar_card_number" required>

                <label for="password_reg">Password</label>
                <input type="password" id="password_reg" name="password" required>

                <label for="confirm_password_reg">Confirm Password</label>
                <input type="password" id="confirm_password_reg" name="confirm_password" required>

                <!-- reCAPTCHA v3: hidden input receives token before submit -->
                <input type="hidden" name="g-recaptcha-response" class="g-recaptcha-response">

                <button type="submit" class="modal-submit">Register</button>
            </form>
            <p style="margin-top:8px;">Already have an account? <a href="#" id="openLoginFromRegister">Login</a></p>
        </div>
    </div>

    <script>
    // Safely attach botButton handler if element exists (keeps backward compatibility)
    var botBtn = document.getElementById("botButton");
    if (botBtn) {
        botBtn.addEventListener("click", function() {
            // Redirect to the bot interface page
            window.location.href = "/index_bot";
        });
    }

    // Login modal behaviour + AJAX submit
    var loginBtn = document.getElementById('loginBtn');
    var loginModal = document.getElementById('loginModal');
    var loginClose = document.getElementById('loginClose');
    var loginForm = document.getElementById('loginForm');
    var loginError = document.getElementById('loginError');

    function openLoginModal(){
        if(loginModal) loginModal.style.display = 'flex';
    }

    if (loginBtn && loginModal) {
        loginBtn.addEventListener('click', function(e) {
            e.preventDefault();
            openLoginModal();
        });
    }
    if (loginClose) {
        loginClose.addEventListener('click', function() {
            loginModal.style.display = 'none';
        });
    }
    // Close modal when clicking outside content
    window.addEventListener('click', function(e) {
        if (e.target === loginModal) {
            loginModal.style.display = 'none';
        }
    });

    // AJAX login is handled via reCAPTCHA v3 (grecaptcha.execute) in the v3 loader script above

    // Register modal behaviour (opens from login modal or nav)
    var registerModal = document.getElementById('registerModal');
    var registerClose = document.getElementById('registerClose');
    var openRegisterLink = document.getElementById('openRegisterLink');
    var openLoginFromRegister = document.getElementById('openLoginFromRegister');

    function openRegisterModal(){
        if(registerModal) registerModal.style.display = 'flex';
    }

    if(openRegisterLink){
        openRegisterLink.addEventListener('click', function(e){
            // fallback href leads to /sign_up; prevent and open modal for JS-enabled browsers
            e.preventDefault();
            if(loginModal) loginModal.style.display = 'none';
            openRegisterModal();
        });
    }
    if(registerClose){
        registerClose.addEventListener('click', function(){
            registerModal.style.display = 'none';
        });
    }
    // Close register modal when clicking outside
    window.addEventListener('click', function(e){
        if(e.target === registerModal){
            registerModal.style.display = 'none';
        }
    });

    if(openLoginFromRegister){
        openLoginFromRegister.addEventListener('click', function(e){
            e.preventDefault();
            if(registerModal) registerModal.style.display = 'none';
            openLoginModal();
        });
    }
    </script>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <!-- JavaScript to hide flash message after 10 seconds -->
    <script>
        $(document).ready(function() {
            var flashMessage = $('#flash-message');
            if (flashMessage.length > 0) {
                setTimeout(function() {
                    flashMessage.fadeOut('slow');
                }, 10000); // 10 seconds
            }
        });
</script>
   
<script src="https://cdn.jsdelivr.net/npm/locomotive-scroll@3.5.4/dist/locomotive-scroll.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js" 
integrity="sha512-7eHRwcbYkK4d9g/6tD/mhkf++eoTHwpNM9woBxtPUBWm67zeAfFC+HrdoE2GanKeocly/VxeLvIqwvCdk7qScg==" 
crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"
    integrity="sha512-onMTRKJBKz8M1TnqqDuGBlowlH0ohFzMXYRNebz+yOcc5TQr/zAKsthzhuv0hiyUKEiQEQXEynnXCvNTOk50dg=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://unpkg.com/typed.js@2.1.0/dist/typed.umd.js"></script>
<script src="https://kit.fontawesome.com/1165876da6.js" crossorigin="anonymous"></script>
    <!-- Load reCAPTCHA v3 (render with site key) -->
    <script src="https://www.google.com/recaptcha/api.js?render={{ recaptcha_site_key }}"></script>
    <script>
        // expose site key to inline scripts
        const RECAPTCHA_SITE_KEY = "{{ recaptcha_site_key or '' }}";

        // Update AJAX login handler to use reCAPTCHA v3
        if (loginForm) {
            loginForm.addEventListener('submit', function(e){
                e.preventDefault();
                loginError.style.display = 'none';

                if (!RECAPTCHA_SITE_KEY) {
                    loginError.textContent = 'Captcha not configured.';
                    loginError.style.display = 'block';
                    return;
                }

                grecaptcha.execute(RECAPTCHA_SITE_KEY, {action: 'login'}).then(function(token){
                    try{ var formData = new FormData(loginForm); }catch(err){ formData = new FormData(); }
                    formData.append('g-recaptcha-response', token);

                    fetch('/ajax_login', { method: 'POST', body: formData, credentials: 'same-origin' })
                        .then(function(res){ return res.json().then(function(data){ return {status: res.status, body: data}; }); })
                        .then(function(result){
                            if(result.status === 200 && result.body.success){
                                window.location.href = result.body.redirect || '/home_login';
                            } else {
                                var msg = (result.body && result.body.error) ? result.body.error : 'Login failed.';
                                loginError.textContent = msg;
                                loginError.style.display = 'block';
                            }
                        }).catch(function(err){
                            loginError.textContent = 'Network error. Please try again.';
                            loginError.style.display = 'block';
                        });
                }).catch(function(err){
                    loginError.textContent = 'Captcha error. Please try again.';
                    loginError.style.display = 'block';
                });
            });
        }

        // Generic helper: attach v3 token to non-AJAX forms that have class 'needs-recaptcha'
        document.querySelectorAll('form.needs-recaptcha').forEach(function(form){
            form.addEventListener('submit', function(evt){
                evt.preventDefault();
                if(!RECAPTCHA_SITE_KEY){ form.submit(); return; }
                grecaptcha.execute(RECAPTCHA_SITE_KEY, {action: form.dataset.recaptchaAction || 'submit'}).then(function(token){
                    var hid = form.querySelector('input[name="g-recaptcha-response"]');
                    if(!hid){ hid = document.createElement('input'); hid.type = 'hidden'; hid.name = 'g-recaptcha-response'; form.appendChild(hid); }
                    hid.value = token;
                    form.submit();
                }).catch(function(){ form.submit(); });
            });
        });
    </script>
<script>
        // Carousel setup - wrapped in try/catch so a single error doesn't stop the page
        try {
            // Access the slide images (only inside the carousel)
            let slideImages = document.querySelectorAll('.slide-container .slides img');
            // Access the next and prev buttons
            let next = document.querySelector('.next');
            let prev = document.querySelector('.prev');
            // Dots container (we'll generate dots dynamically)
            let dotsContainer = document.querySelector('.dotsContainer');
            let dots = [];

            var counter = 0;

            // build dots based on number of slides
            if (dotsContainer && slideImages.length) {
                dotsContainer.innerHTML = '';
                for (let i = 0; i < slideImages.length; i++) {
                    const d = document.createElement('div');
                    d.className = 'dot' + (i === 0 ? ' active' : '');
                    d.setAttribute('attr', String(i));
                    d.addEventListener('click', function() { switchImage(this); });
                    dotsContainer.appendChild(d);
                }
                dots = Array.from(dotsContainer.querySelectorAll('.dot'));
            }

            // Preload slide images and fade them in when ready
            function preloadSlides() {
                slideImages.forEach(function(img){
                    try{
                        var tmp = new Image();
                        tmp.onload = function(){
                            img.setAttribute('data-loaded','true');
                        };
                        tmp.onerror = function(){
                            // if loading fails, still mark as loaded to avoid permanent blank
                            img.setAttribute('data-loaded','true');
                        };
                        tmp.src = img.src;
                    }catch(e){
                        img.setAttribute('data-loaded','true');
                    }
                });
            }
            preloadSlides();

            // If for some reason images didn't signal loaded (e.g. blocked cross-origin), ensure at least the first slide becomes visible
            setTimeout(function(){
                var anyLoaded = Array.from(slideImages).some(function(img){ return img.getAttribute('data-loaded') === 'true'; });
                if(!anyLoaded && slideImages.length){
                    slideImages[0].setAttribute('data-loaded','true');
                }
            }, 1200);

            // Code for next button (safe guards)
            if(next) next.addEventListener('click', slideNext);
            function slideNext(){
                try{
                    if(!slideImages || slideImages.length === 0) return;
                    // current slide
                    var prevIndex = counter;
                    if(slideImages[prevIndex]) slideImages[prevIndex].style.animation = 'next1 0.5s ease-in forwards';
                    // compute next
                    counter = (counter + 1) % slideImages.length;
                    if(slideImages[counter]) slideImages[counter].style.animation = 'next2 0.5s ease-in forwards';
                    // make sure indicators clamp
                    if(dots && dots.length){ if(counter >= dots.length) counter = 0; }
                    indicators();
                }catch(e){ console.error('slideNext error', e); }
            }

            // Code for prev button (safe guards)
            if(prev) prev.addEventListener('click', slidePrev);
            function slidePrev(){
                try{
                    if(!slideImages || slideImages.length === 0) return;
                    var prevIndex = counter;
                    if(slideImages[prevIndex]) slideImages[prevIndex].style.animation = 'prev1 0.5s ease-in forwards';
                    // compute prev
                    counter = (counter - 1 + slideImages.length) % slideImages.length;
                    if(slideImages[counter]) slideImages[counter].style.animation = 'prev2 0.5s ease-in forwards';
                    // clamp indicators
                    if(dots && dots.length){ if(counter >= dots.length) counter = 0; }
                    indicators();
                }catch(e){ console.error('slidePrev error', e); }
            }

            // Auto sliding
            var deletInterval = null;
            function autoSliding(){
                deletInterval = setInterval(function(){ slideNext(); indicators(); }, 3000);
            }
            autoSliding();

            // Stop auto sliding when mouse is over
            const container = document.querySelector('.slide-container');
            if(container){
                container.addEventListener('mouseover', function(){
                    if(deletInterval) clearInterval(deletInterval);
                });

                // Resume sliding when mouse is out
                container.addEventListener('mouseout', autoSliding);
            }

            // Add and remove active class from the indicators (defensive)
            function indicators(){
                if(!dots || !Array.isArray(dots) || dots.length === 0) return;
                // ensure counter within indicators range
                if(counter >= dots.length) counter = counter % dots.length;
                if(counter < 0) counter = 0;
                dots.forEach(function(d){ if(d && typeof d.className === 'string') d.className = d.className.replace(/\s*active\b/,''); });
                if(dots[counter] && typeof dots[counter].className === 'string') dots[counter].className = (dots[counter].className + ' active').trim();
            }

            // Add click event to the indicator
            function switchImage(currentImage){
                try{
                    if(!currentImage) return;
                    if(currentImage.classList) currentImage.classList.add('active');
                    var imageId = parseInt(currentImage.getAttribute('attr'), 10);
                    if(isNaN(imageId) || !slideImages || slideImages.length === 0) return;
                    if(imageId > counter){
                        if(slideImages[counter]) slideImages[counter].style.animation = 'next1 0.5s ease-in forwards';
                        counter = imageId;
                        if(slideImages[counter]) slideImages[counter].style.animation = 'next2 0.5s ease-in forwards';
                    }
                    else if(imageId == counter){
                        return;
                    }
                    else{
                        if(slideImages[counter]) slideImages[counter].style.animation = 'prev1 0.5s ease-in forwards';
                        counter = imageId;
                        if(slideImages[counter]) slideImages[counter].style.animation = 'prev2 0.5s ease-in forwards';
                    }
                    indicators();
                }catch(e){ console.error('switchImage error', e); }
            }
        } catch(err) {
            console.error('Carousel init error:', err);
            // As a last resort, make first slide visible so UI isn't a solid black block
            try{ var fallbackImg = document.querySelector('.slide-container .slides img'); if(fallbackImg) fallbackImg.setAttribute('data-loaded','true'); }catch(e){}
        }
        
    


    function locomotiveAnimation() {
        gsap.registerPlugin(ScrollTrigger);

        const locoScroll = new LocomotiveScroll({
            el: document.querySelector("#main"),
            smooth: true,

            // for tablet smooth
            tablet: { smooth: true },

            // for mobile
            smartphone: { smooth: true }
        });
        locoScroll.on("scroll", ScrollTrigger.update);

        ScrollTrigger.scrollerProxy("#main", {
            scrollTop(value) {
                return arguments.length
                    ? locoScroll.scrollTo(value, 0, 0)
                    : locoScroll.scroll.instance.scroll.y;
            },
            getBoundingClientRect() {
                return {
                    top: 0,
                    left: 0,
                    width: window.innerWidth,
                    height: window.innerHeight
                };
            }
        });

            ScrollTrigger.addEventListener("refresh", () => locoScroll.update());

            ScrollTrigger.refresh();
        }

        function loadingAnimation() {

            var tl = gsap.timeline()
            tl.from("#page1", {
                opacity: 0,
                duration: 0.2,
                delay: 0.2
            })
            tl.from("#page1", {
                transform: "scaleX(0.7) scaleY(0.2) translateY(80%)",
                borderRadius: "150px",
                duration: 2,
                ease: "expo.out"
            })
            tl.from("nav", {
                opacity: 0,
                delay: -0.2
            })
            tl.from("#page1 h1, #page1 p, #page1 div", {
                opacity: 0,
                duration: 0.5,
                stagger: 0.2
            })
        }

        function navAnimation() {
            var nav = document.querySelector("nav")

            nav.addEventListener("mouseenter", function () {
                let tl = gsap.timeline()

                tl.to("#nav-bottom", {
                    height: "21vh",
                    duration: 0.5
                })
                tl.to(".nav-part2 h5", {
                    display: "block",
                    duration: 0.1

                })
                tl.to(".nav-part2 h5 span", {
                    y: 0,
                    // duration:0.3,
                    stagger: {
                        amount: 0.5
                    }
                })
            })
            nav.addEventListener("mouseleave", function () {
                let tl = gsap.timeline()
                tl.to(".nav-part2 h5 span", {
                    y: 25,
                    stagger: {
                        amount: 0.2
                    }
                })
                tl.to(".nav-part2 h5", {
                    display: "none",
                    duration: 0.1
                })
                tl.to("#nav-bottom", {
                    height: 0,
                    duration: 0.2
                })
            })
        }

        function page2Animation() {
            var rightElems = document.querySelectorAll(".right-elem")

            rightElems.forEach(function (elem) {
                elem.addEventListener("mouseenter", function () {




                    gsap.to(elem.childNodes[3], {
                        opacity: 1,
                        scale: 1
                    })
                })
                elem.addEventListener("mouseleave", function () {
                    gsap.to(elem.childNodes[3], {
                        opacity: 0,
                        scale: 0
                    })
                })
                elem.addEventListener("mousemove", function (dets) {

                    gsap.to(elem.childNodes[3], {
                        x: dets.x - elem.getBoundingClientRect().x - 90,
                        y: dets.y - elem.getBoundingClientRect().y - 215
                    })
                })
            })
        }

        function page3VideoAnimation() {
            var page3Center = document.querySelector(".page3-center")
            var video = document.querySelector("#page3 video")

            page3Center.addEventListener("click", function () {
                video.play()
                gsap.to(video, {
                    transform: "scaleX(1) scaleY(1)",
                    opacity: 1,
                    borderRadius: 0

                })
            })
            video.addEventListener("click", function () {
                video.pause()
                gsap.to(video, {
                    transform: "scaleX(0.7) scaleY(0)",
                    opacity: 0,
                    borderRadius: "30px"
                })
            })


            var sections = document.querySelectorAll(".sec-right")

            sections.forEach(function (elem) {
                elem.addEventListener("mouseenter", function () {
                    elem.childNodes[3].style.opacity = 1
                    elem.childNodes[3].play()
                })
                elem.addEventListener("mouseleave", function () {
                    elem.childNodes[3].style.opacity = 0
                    elem.childNodes[3].load()
                })
            })

        }

        function page6Animations() {
            gsap.from("#btm6-part2 h4", {
                x: 0,
                duration: 1,
                scrollTrigger: {
                    trigger: "#btm6-part2",
                    scroller: "#main",
                    // markers:true,
                    start: "top 80%",
                    end: "top 10%",
                    scrub: true
                }
            })
        }
        function typewriter(){
            var typed = new Typed(".auto-type",{
                strings:["First Information report registration BOT","Now you can register the FIR online","Fast and Reliable"],
                typeSpeed:150,
                backSpedd:150,
                loop:true,
            })
        }

        locomotiveAnimation()

        navAnimation()

        page2Animation()

        page3VideoAnimation()

        page6Animations()

        loadingAnimation()
        typewriter()
      
       
    </script>
</body>

</html>
